{"version":3,"file":"app.min.js","sources":["app.ts"],"sourcesContent":["/**\n * EGroupware - Untissync - Javascript UI\n *\n * @link http://www.egroupware.org\n * @package untissync\n * @author Axel Wild\n * @copyright (c) 2020 by Axel Wild\n * @license http://opensource.org/licenses/gpl-license.php GPL - GNU General Public License\n */\n\nimport {EgwApp} from '../../api/js/jsapi/egw_app';\n\n\n\n/**\n * UI for untissync\n *\n * @augments AppJS\n */\nclass UntissyncApp extends EgwApp\n{\n\n\tconstructor()\n\t{\n\t\tsuper('untissync');\n\t}\n\n\t/**\n\t * Destructor\n\t */\n\tdestroy(_app)\n\t{\n\t\tdelete this.et2;\n\t\tsuper.destroy(_app);\n\t}\n\n\t/**\n\t * This function is called when the etemplate2 object is loaded\n\t * and ready.  If you must store a reference to the et2 object,\n\t * make sure to clean it up in destroy().\n\t *\n\t * @param et2 etemplate2 Newly ready object\n\t * @param string name\n\t */\n\tet2_ready(et2, name: string)\n\t{\n\t\t// call parent\n\t\tsuper.et2_ready(et2, name);\t\t\n\t}\n\n\t/**\n\t * Import substitutions via AJAX\n\t */\n\timport_substitutions(){\n\t\tlet et2 = this.et2;\n\t\tthis.egw.loading_prompt('untissync',true,egw.lang('please wait...'));\n\t\tthis.egw.json('untissync.untissync_ui.ajax_importSubstitutions',[], function(_data){\n\t\t\tegw.loading_prompt('untissync', false);\n\t\t\tdocument.getElementById('untissync-index_last_webuntis_import').innerText = _data.last_webuntis_import;\n\t\t\tdocument.getElementById('untissync-index_last_update_subs').innerText = _data.last_update_subs;\n\t\t\tegw(window).refresh(_data.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * Import timetables via AJAX and long task\n\t */\n\timport_timetableLT(){\n\t\tlet activeCount = parseInt(document.getElementById(\"untissync-index_teacher_active_count\").innerText);\n\n\t\tlet menuaction = 'untissync.untissync_ui.ajax_importTimetableLT';\n\t\tlet indices = [];\n\t\tlet msg1 = egw.lang('import %1 timetables', \"\"+activeCount);\n\n\t\tfor (let i=0;i< activeCount;i++)\n\t\t{\n\t\t\tindices[i] = i;\n\t\t}\n\n\t\tlet callbackDialog = function (btn){\n\t\t\tif (btn === et2_dialog.YES_BUTTON)\n\t\t\t{\n\t\t\t\t// long task dialog for de/activation accounts\n\t\t\t\tet2_dialog.long_task(function(_val, _resp){\n\t\t\t\t\tif (_val && _resp.type !== 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(_val,_resp);\n\t\t\t\t\t}\n\t\t\t\t}, msg1, 'import timetables', menuaction, indices, 'untissync');\n\t\t\t}\n\t\t};\n\t\t// confirmation dialog\n\t\tet2_dialog.show_dialog(callbackDialog, egw.lang('Are you sure you want to import %1 timetables?', activeCount), egw.lang('Import timetables?'), {},\n\t\t\tet2_dialog.BUTTON_YES_NO, et2_dialog.WARNING_MESSAGE, undefined, egw);\n\t}\n\n\t/**\n\t * Import timetables via AJAX\n\t */\n\ttest_connection(){\n\t\tlet et2 = this.et2;\n\t\tegw.loading_prompt('untissync',true,egw.lang('please wait...'));\n\t\tegw.json('untissync.untissync_ui.ajax_testConnection',[], function(_data){\n\t\t\tegw.loading_prompt('untissync', false);\n\t\t\tif(_data.status == 'success'){\n\t\t\t\tdocument.getElementById('untissync-index_test_connection_success').style.display = 'inline';\n\t\t\t\tdocument.getElementById('untissync-index_test_connection_failed').style.display = 'none';\n\t\t\t\tegw(window).message(_data.msg, 'success');\n\t\t\t}\n\t\t\telse{\n\t\t\t\tdocument.getElementById('untissync-index_test_connection_success').style.display = 'none';\n\t\t\t\tdocument.getElementById('untissync-index_test_connection_failed').style.display = 'inline';\n\t\t\t\tegw(window).message(_data.msg, 'error');\n\t\t\t}\n\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * Cleanup orphaned calendar items\n\t */\n\tcleanup_orphaned(){\n\t\tegw.loading_prompt('untissync',true,egw.lang('please wait...'));\n\t\tegw.json('untissync.untissync_ui.ajax_cleanupOrphaned',[], function(_data){\n\t\t\tegw.loading_prompt('untissync', false);\n\t\t\tegw(window).refresh(_data.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\t}\n\n\tdelete_timetablesLT(){\n\t\tlet activeCount = parseInt(document.getElementById(\"untissync-index_teacher_all_count\").innerText);\n\n\t\tlet menuaction = 'untissync.untissync_ui.ajax_deleteTimetablesLT';\n\t\tlet indices = [];\n\t\tlet msg1 = egw.lang('clear %1 timetables', \"\"+activeCount);\n\n\t\tfor (let i=0;i< activeCount;i++)\n\t\t{\n\t\t\tindices[i] = i;\n\t\t}\n\n\t\tlet callbackDialog = function (btn){\n\t\t\tif (btn === et2_dialog.YES_BUTTON)\n\t\t\t{\n\t\t\t\t// long task dialog for de/activation accounts\n\t\t\t\tet2_dialog.long_task(function(_val, _resp){\n\t\t\t\t\tif (_val && _resp.type !== 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(_val,_resp);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\n\t\t\t\t\t}\n\t\t\t\t}, msg1, 'clear timetables', menuaction, indices, 'untissync');\n\t\t\t}\n\t\t};\n\t\t// confirmation dialog\n\t\tet2_dialog.show_dialog(callbackDialog, egw.lang('Are you sure you want to clear %1 timetables?', activeCount), egw.lang('Clear timetables?'), {},\n\t\t\tet2_dialog.BUTTON_YES_NO, et2_dialog.WARNING_MESSAGE, undefined, egw);\n\t}\n\n\t/**\n\t * Cleanup substitutions\n\t */\n\tdelete_substitutions(){\n\t\tegw.loading_prompt('untissync',true,egw.lang('please wait...'));\n\t\tegw.json('untissync.untissync_ui.ajax_deleteSubstitutions',[], function(_data){\n\t\t\tegw.loading_prompt('untissync', false);\n\t\t\tegw(window).refresh(_data.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * enable teachers\n\t */\n\tteacher_enable(_action, _senders){\n\t\tlet enable = true;\n\t\tlet teachers = [];\n\t\tegw.loading_prompt('untissync',true,egw.lang('please wait 1...'));\n\t\tfor(let i = 0; i < _senders.length; i++)\n\t\t{\n\t\t\tteachers.push(_senders[i].id.split(\"::\").pop());\n\t\t}\n\t\tegw.json('untissync.untissync_mapping_ui.ajax_teacher_enable',[enable, teachers], function(_data){\n\t\t\tegw.loading_prompt('untissync', false);\n\t\t\tegw(window).refresh(_data.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * disable teachers\n\t */\n\tteacher_disable(_action, _senders){\n\t\tlet enable = false;\n\t\tlet teachers = [];\n\t\tegw.loading_prompt('untissync',true,egw.lang('please wait 1...'));\n\t\tfor(let i = 0; i < _senders.length; i++)\n\t\t{\n\t\t\tteachers.push(_senders[i].id.split(\"::\").pop());\n\t\t}\n\t\tegw.json('untissync.untissync_mapping_ui.ajax_teacher_enable',[enable, teachers], function(_data){\n\t\t\tegw.loading_prompt('untissync', false);\n\t\t\tegw(window).refresh(_data.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * edit teachers mapping\n\t */\n\tonTeacherMappingEdit(_action, _senders){\n\t\tlet row_id = _senders[0]._index;\n\t\tlet func = 'untissync.untissync_mapping_ui.ajax_onTeacherMappingEdit';\n\n\t\tthis.egw.json(func, [row_id], function (result) {\n\t\t\tlet modal = document.getElementById(\"untissync-mapping_te_showtemapmodal\");\n\t\t\tmodal.style.display = \"block\";\n\n\t\t\tfor (let key in result){\n\t\t\t\tlet widget_id = 'untissync-mapping_te_showtemapmodal_showtemapcontent_' + key;\n\n\t\t\t\tlet widget = <HTMLInputElement>document.getElementById(widget_id);\n\t\t\t\tif (widget) {\n\t\t\t\t\twidget.innerText = result[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * commit teacher mapping\n\t * @param _action\n\t * @param _senders\n\t */\n\tonTeacherMappingCommit(_action, _senders){\n\t\t//let te_egw_uid = document.getElementById(\"untissync-mapping_te_te_egw_uid\").value;\n\t\tlet te_egw_uid = document.getElementById(\"untissync-mapping_te_showtemapmodal_showtemapcontent_te_egw_uid\").value;\n\t\tlet func = 'untissync.untissync_mapping_ui.ajax_onTeacherMappingCommit';\n\n\t\tthis.egw.json(func, [te_egw_uid], function (result) {\n\t\t\t// todo msg\n\t\t\tegw(window).refresh(result.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\n\t\tlet modal = document.getElementById(\"untissync-mapping_te_showtemapmodal\");\n\t\tmodal.style.display = \"none\";\n\t}\n\tonTeacherMappingCancel(_action, _senders){\n\t\tlet modal = document.getElementById(\"untissync-mapping_te_showtemapmodal\");\n\t\tmodal.style.display = \"none\";\n\t}\n\n\t/**\n\t * edit klasse mapping\n\t */\n\tonKlasseMappingEdit(_action, _senders){\n\t\tlet row_id = _senders[0]._index;\n\t\tlet func = 'untissync.untissync_mapping_ui.ajax_onKlasseMappingEdit';\n\n\t\tthis.egw.json(func, [row_id], function (result) {\n\t\t\tlet modal = document.getElementById(\"untissync-mapping_kl_showklmapmodal\");\n\t\t\tmodal.style.display = \"block\";\n\n\t\t\tfor (let key in result){\n\t\t\t\tlet widget_id = 'untissync-mapping_kl_showklmapmodal_showklmapcontent_' + key;\n\n\t\t\t\tlet widget = <HTMLInputElement>document.getElementById(widget_id);\n\t\t\t\tif (widget) {\n\t\t\t\t\twidget.innerText = result[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * commit klasse mapping\n\t * @param _action\n\t * @param _senders\n\t */\n\tonKlasseMappingCommit(_action, _senders){\n\t\tlet egw_uid = document.getElementById(\"untissync-mapping_kl_showklmapmodal_showklmapcontent_egw_uid\").value;\n\t\tlet egw_group_id = document.getElementById(\"untissync-mapping_kl_showklmapmodal_showklmapcontent_egw_group_id\").value;\n\t\tlet func = 'untissync.untissync_mapping_ui.ajax_onKlasseMappingCommit';\n\n\t\tthis.egw.json(func, [egw_uid, egw_group_id], function (result) {\n\t\t\t// todo msg\n\t\t\tegw(window).refresh(result.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\n\t\tlet modal = document.getElementById(\"untissync-mapping_kl_showklmapmodal\");\n\t\tmodal.style.display = \"none\";\n\t}\n\tonKlasseMappingCancel(_action, _senders){\n\t\tlet modal = document.getElementById(\"untissync-mapping_kl_showklmapmodal\");\n\t\tmodal.style.display = \"none\";\n\t}\n\n\t/**\n\t * edit klasse mapping\n\t */\n\tonRoomMappingEdit(_action, _senders){\n\t\tlet row_id = _senders[0]._index;\n\t\tlet func = 'untissync.untissync_mapping_ui.ajax_onRoomMappingEdit';\n\n\t\tthis.egw.json(func, [row_id], function (result) {\n\t\t\tlet modal = document.getElementById(\"untissync-mapping_ro_showromapmodal\");\n\t\t\tmodal.style.display = \"block\";\n\n\t\t\tfor (let key in result){\n\t\t\t\tif(key != \"rooms\"){\n\t\t\t\t\tlet widget_id = 'untissync-mapping_ro_showromapmodal_showromapcontent_' + key;\n\n\t\t\t\t\tlet widget = <HTMLInputElement>document.getElementById(widget_id);\n\t\t\t\t\tif (widget) {\n\t\t\t\t\t\twidget.innerText = result[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}).sendRequest(true);\n\t}\n\n\t/**\n\t * commit klasse mapping\n\t * @param _action\n\t * @param _senders\n\t */\n\tonRoomMappingCommit(_action, _senders){\n\t\tlet ro_egw_uid = document.getElementById(\"untissync-mapping_ro_showromapmodal_showromapcontent_rooms\").value;\n\t\tlet func = 'untissync.untissync_mapping_ui.ajax_onRoomMappingCommit';\n\n\t\tthis.egw.json(func, [ro_egw_uid], function (result) {\n\t\t\t// todo msg\n\t\t\tegw(window).refresh(result.msg, 'untissync', null, 'update');\n\t\t}).sendRequest(true);\n\n\t\tlet modal = document.getElementById(\"untissync-mapping_ro_showromapmodal\");\n\t\tmodal.style.display = \"none\";\n\t}\n\tonRoomMappingCancel(_action, _senders){\n\t\tlet modal = document.getElementById(\"untissync-mapping_ro_showromapmodal\");\n\t\tmodal.style.display = \"none\";\n\t}\n}\n\napp.classes.untissync = UntissyncApp;\n"],"names":["UntissyncApp","EgwApp","constructor","destroy","_app","et2","et2_ready","name","import_substitutions","egw","loading_prompt","lang","json","_data","document","getElementById","innerText","last_webuntis_import","last_update_subs","window","refresh","msg","sendRequest","import_timetableLT","activeCount","parseInt","menuaction","indices","msg1","i","callbackDialog","btn","et2_dialog","YES_BUTTON","long_task","_val","_resp","type","console","log","show_dialog","BUTTON_YES_NO","WARNING_MESSAGE","undefined","test_connection","status","style","display","message","cleanup_orphaned","delete_timetablesLT","delete_substitutions","teacher_enable","_action","_senders","enable","teachers","length","push","id","split","pop","teacher_disable","onTeacherMappingEdit","row_id","_index","func","result","modal","key","widget_id","widget","onTeacherMappingCommit","te_egw_uid","value","onTeacherMappingCancel","onKlasseMappingEdit","onKlasseMappingCommit","egw_uid","egw_group_id","onKlasseMappingCancel","onRoomMappingEdit","onRoomMappingCommit","ro_egw_uid","onRoomMappingCancel","app","classes","untissync"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;;AACA,MAAMA,YAAN,SAA2BC,MAA3B,CACA;AAECC,EAAAA,WAAW,GACX;AACC,UAAM,WAAN;AACA;AAED;AACD;AACA;;;AACCC,EAAAA,OAAO,CAACC,IAAD,EACP;AACC,WAAO,KAAKC,GAAZ;AACA,UAAMF,OAAN,CAAcC,IAAd;AACA;AAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACCE,EAAAA,SAAS,CAACD,GAAD,EAAME,IAAN,EACT;AACC;AACA,UAAMD,SAAN,CAAgBD,GAAhB,EAAqBE,IAArB;AACA;AAED;AACD;AACA;;;AACCC,EAAAA,oBAAoB,GAAE;AACrB,QAAIH,GAAG,GAAG,KAAKA,GAAf;AACA,SAAKI,GAAL,CAASC,cAAT,CAAwB,WAAxB,EAAoC,IAApC,EAAyCD,GAAG,CAACE,IAAJ,CAAS,gBAAT,CAAzC;AACA,SAAKF,GAAL,CAASG,IAAT,CAAc,iDAAd,EAAgE,EAAhE,EAAoE,UAASC,KAAT,EAAe;AAClFJ,MAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAAgC,KAAhC;AACAI,MAAAA,QAAQ,CAACC,cAAT,CAAwB,sCAAxB,EAAgEC,SAAhE,GAA4EH,KAAK,CAACI,oBAAlF;AACAH,MAAAA,QAAQ,CAACC,cAAT,CAAwB,kCAAxB,EAA4DC,SAA5D,GAAwEH,KAAK,CAACK,gBAA9E;AACAT,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoBP,KAAK,CAACQ,GAA1B,EAA+B,WAA/B,EAA4C,IAA5C,EAAkD,QAAlD;AACA,KALD,EAKGC,WALH,CAKe,IALf;AAMA;AAED;AACD;AACA;;;AACCC,EAAAA,kBAAkB,GAAE;AACnB,QAAIC,WAAW,GAAGC,QAAQ,CAACX,QAAQ,CAACC,cAAT,CAAwB,sCAAxB,EAAgEC,SAAjE,CAA1B;AAEA,QAAIU,UAAU,GAAG,+CAAjB;AACA,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,IAAI,GAAGnB,GAAG,CAACE,IAAJ,CAAS,sBAAT,EAAiC,KAAGa,WAApC,CAAX;;AAEA,SAAK,IAAIK,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAEL,WAAhB,EAA4BK,CAAC,EAA7B,EACA;AACCF,MAAAA,OAAO,CAACE,CAAD,CAAP,GAAaA,CAAb;AACA;;AAED,QAAIC,cAAc,GAAG,UAAUC,GAAV,EAAc;AAClC,UAAIA,GAAG,KAAKC,UAAU,CAACC,UAAvB,EACA;AACC;AACAD,QAAAA,UAAU,CAACE,SAAX,CAAqB,UAASC,IAAT,EAAeC,KAAf,EAAqB;AACzC,cAAID,IAAI,IAAIC,KAAK,CAACC,IAAN,KAAe,OAA3B,EACA;AACCC,YAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EAAiBC,KAAjB;AACA;AACD,SALD,EAKGR,IALH,EAKS,mBALT,EAK8BF,UAL9B,EAK0CC,OAL1C,EAKmD,WALnD;AAMA;AACD,KAXD,CAZmB;;;AAyBnBK,IAAAA,UAAU,CAACQ,WAAX,CAAuBV,cAAvB,EAAuCrB,GAAG,CAACE,IAAJ,CAAS,gDAAT,EAA2Da,WAA3D,CAAvC,EAAgHf,GAAG,CAACE,IAAJ,CAAS,oBAAT,CAAhH,EAAgJ,EAAhJ,EACCqB,UAAU,CAACS,aADZ,EAC2BT,UAAU,CAACU,eADtC,EACuDC,SADvD,EACkElC,GADlE;AAEA;AAED;AACD;AACA;;;AACCmC,EAAAA,eAAe,GAAE;AAChB,QAAIvC,GAAG,GAAG,KAAKA,GAAf;AACAI,IAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAA+B,IAA/B,EAAoCD,GAAG,CAACE,IAAJ,CAAS,gBAAT,CAApC;AACAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,4CAAT,EAAsD,EAAtD,EAA0D,UAASC,KAAT,EAAe;AACxEJ,MAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAAgC,KAAhC;;AACA,UAAGG,KAAK,CAACgC,MAAN,IAAgB,SAAnB,EAA6B;AAC5B/B,QAAAA,QAAQ,CAACC,cAAT,CAAwB,yCAAxB,EAAmE+B,KAAnE,CAAyEC,OAAzE,GAAmF,QAAnF;AACAjC,QAAAA,QAAQ,CAACC,cAAT,CAAwB,wCAAxB,EAAkE+B,KAAlE,CAAwEC,OAAxE,GAAkF,MAAlF;AACAtC,QAAAA,GAAG,CAACU,MAAD,CAAH,CAAY6B,OAAZ,CAAoBnC,KAAK,CAACQ,GAA1B,EAA+B,SAA/B;AACA,OAJD,MAKI;AACHP,QAAAA,QAAQ,CAACC,cAAT,CAAwB,yCAAxB,EAAmE+B,KAAnE,CAAyEC,OAAzE,GAAmF,MAAnF;AACAjC,QAAAA,QAAQ,CAACC,cAAT,CAAwB,wCAAxB,EAAkE+B,KAAlE,CAAwEC,OAAxE,GAAkF,QAAlF;AACAtC,QAAAA,GAAG,CAACU,MAAD,CAAH,CAAY6B,OAAZ,CAAoBnC,KAAK,CAACQ,GAA1B,EAA+B,OAA/B;AACA;AAED,KAbD,EAaGC,WAbH,CAae,IAbf;AAcA;AAED;AACD;AACA;;;AACC2B,EAAAA,gBAAgB,GAAE;AACjBxC,IAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAA+B,IAA/B,EAAoCD,GAAG,CAACE,IAAJ,CAAS,gBAAT,CAApC;AACAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,6CAAT,EAAuD,EAAvD,EAA2D,UAASC,KAAT,EAAe;AACzEJ,MAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAAgC,KAAhC;AACAD,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoBP,KAAK,CAACQ,GAA1B,EAA+B,WAA/B,EAA4C,IAA5C,EAAkD,QAAlD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAIA;;AAED4B,EAAAA,mBAAmB,GAAE;AACpB,QAAI1B,WAAW,GAAGC,QAAQ,CAACX,QAAQ,CAACC,cAAT,CAAwB,mCAAxB,EAA6DC,SAA9D,CAA1B;AAEA,QAAIU,UAAU,GAAG,gDAAjB;AACA,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,IAAI,GAAGnB,GAAG,CAACE,IAAJ,CAAS,qBAAT,EAAgC,KAAGa,WAAnC,CAAX;;AAEA,SAAK,IAAIK,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAEL,WAAhB,EAA4BK,CAAC,EAA7B,EACA;AACCF,MAAAA,OAAO,CAACE,CAAD,CAAP,GAAaA,CAAb;AACA;;AAED,QAAIC,cAAc,GAAG,UAAUC,GAAV,EAAc;AAClC,UAAIA,GAAG,KAAKC,UAAU,CAACC,UAAvB,EACA;AACC;AACAD,QAAAA,UAAU,CAACE,SAAX,CAAqB,UAASC,IAAT,EAAeC,KAAf,EAAqB;AACzC,cAAID,IAAI,IAAIC,KAAK,CAACC,IAAN,KAAe,OAA3B,EACA;AACCC,YAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EAAiBC,KAAjB;AACA,WAHD,MAKA;AAGA,SATD,EASGR,IATH,EASS,kBATT,EAS6BF,UAT7B,EASyCC,OATzC,EASkD,WATlD;AAUA;AACD,KAfD,CAZoB;;;AA6BpBK,IAAAA,UAAU,CAACQ,WAAX,CAAuBV,cAAvB,EAAuCrB,GAAG,CAACE,IAAJ,CAAS,+CAAT,EAA0Da,WAA1D,CAAvC,EAA+Gf,GAAG,CAACE,IAAJ,CAAS,mBAAT,CAA/G,EAA8I,EAA9I,EACCqB,UAAU,CAACS,aADZ,EAC2BT,UAAU,CAACU,eADtC,EACuDC,SADvD,EACkElC,GADlE;AAEA;AAED;AACD;AACA;;;AACC0C,EAAAA,oBAAoB,GAAE;AACrB1C,IAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAA+B,IAA/B,EAAoCD,GAAG,CAACE,IAAJ,CAAS,gBAAT,CAApC;AACAF,IAAAA,GAAG,CAACG,IAAJ,CAAS,iDAAT,EAA2D,EAA3D,EAA+D,UAASC,KAAT,EAAe;AAC7EJ,MAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAAgC,KAAhC;AACAD,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoBP,KAAK,CAACQ,GAA1B,EAA+B,WAA/B,EAA4C,IAA5C,EAAkD,QAAlD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAIA;AAED;AACD;AACA;;;AACC8B,EAAAA,cAAc,CAACC,OAAD,EAAUC,QAAV,EAAmB;AAChC,QAAIC,MAAM,GAAG,IAAb;AACA,QAAIC,QAAQ,GAAG,EAAf;AACA/C,IAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAA+B,IAA/B,EAAoCD,GAAG,CAACE,IAAJ,CAAS,kBAAT,CAApC;;AACA,SAAI,IAAIkB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGyB,QAAQ,CAACG,MAA5B,EAAoC5B,CAAC,EAArC,EACA;AACC2B,MAAAA,QAAQ,CAACE,IAAT,CAAcJ,QAAQ,CAACzB,CAAD,CAAR,CAAY8B,EAAZ,CAAeC,KAAf,CAAqB,IAArB,EAA2BC,GAA3B,EAAd;AACA;;AACDpD,IAAAA,GAAG,CAACG,IAAJ,CAAS,oDAAT,EAA8D,CAAC2C,MAAD,EAASC,QAAT,CAA9D,EAAkF,UAAS3C,KAAT,EAAe;AAChGJ,MAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAAgC,KAAhC;AACAD,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoBP,KAAK,CAACQ,GAA1B,EAA+B,WAA/B,EAA4C,IAA5C,EAAkD,QAAlD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAIA;AAED;AACD;AACA;;;AACCwC,EAAAA,eAAe,CAACT,OAAD,EAAUC,QAAV,EAAmB;AACjC,QAAIC,MAAM,GAAG,KAAb;AACA,QAAIC,QAAQ,GAAG,EAAf;AACA/C,IAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAA+B,IAA/B,EAAoCD,GAAG,CAACE,IAAJ,CAAS,kBAAT,CAApC;;AACA,SAAI,IAAIkB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGyB,QAAQ,CAACG,MAA5B,EAAoC5B,CAAC,EAArC,EACA;AACC2B,MAAAA,QAAQ,CAACE,IAAT,CAAcJ,QAAQ,CAACzB,CAAD,CAAR,CAAY8B,EAAZ,CAAeC,KAAf,CAAqB,IAArB,EAA2BC,GAA3B,EAAd;AACA;;AACDpD,IAAAA,GAAG,CAACG,IAAJ,CAAS,oDAAT,EAA8D,CAAC2C,MAAD,EAASC,QAAT,CAA9D,EAAkF,UAAS3C,KAAT,EAAe;AAChGJ,MAAAA,GAAG,CAACC,cAAJ,CAAmB,WAAnB,EAAgC,KAAhC;AACAD,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoBP,KAAK,CAACQ,GAA1B,EAA+B,WAA/B,EAA4C,IAA5C,EAAkD,QAAlD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAIA;AAED;AACD;AACA;;;AACCyC,EAAAA,oBAAoB,CAACV,OAAD,EAAUC,QAAV,EAAmB;AACtC,QAAIU,MAAM,GAAGV,QAAQ,CAAC,CAAD,CAAR,CAAYW,MAAzB;AACA,QAAIC,IAAI,GAAG,0DAAX;AAEA,SAAKzD,GAAL,CAASG,IAAT,CAAcsD,IAAd,EAAoB,CAACF,MAAD,CAApB,EAA8B,UAAUG,MAAV,EAAkB;AAC/C,UAAIC,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,MAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;;AAEA,WAAK,IAAIsB,GAAT,IAAgBF,MAAhB,EAAuB;AACtB,YAAIG,SAAS,GAAG,0DAA0DD,GAA1E;AAEA,YAAIE,MAAM,GAAqBzD,QAAQ,CAACC,cAAT,CAAwBuD,SAAxB,CAA/B;;AACA,YAAIC,MAAJ,EAAY;AACXA,UAAAA,MAAM,CAACvD,SAAP,GAAmBmD,MAAM,CAACE,GAAD,CAAzB;AACA;AACD;AACD,KAZD,EAYG/C,WAZH,CAYe,IAZf;AAaA;AAED;AACD;AACA;AACA;AACA;;;AACCkD,EAAAA,sBAAsB,CAACnB,OAAD,EAAUC,QAAV,EAAmB;AACxC;AACA,QAAImB,UAAU,GAAG3D,QAAQ,CAACC,cAAT,CAAwB,iEAAxB,EAA2F2D,KAA5G;AACA,QAAIR,IAAI,GAAG,4DAAX;AAEA,SAAKzD,GAAL,CAASG,IAAT,CAAcsD,IAAd,EAAoB,CAACO,UAAD,CAApB,EAAkC,UAAUN,MAAV,EAAkB;AACnD;AACA1D,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoB+C,MAAM,CAAC9C,GAA3B,EAAgC,WAAhC,EAA6C,IAA7C,EAAmD,QAAnD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAKA,QAAI8C,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,IAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACA;;AACD4B,EAAAA,sBAAsB,CAACtB,OAAD,EAAUC,QAAV,EAAmB;AACxC,QAAIc,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,IAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACA;AAED;AACD;AACA;;;AACC6B,EAAAA,mBAAmB,CAACvB,OAAD,EAAUC,QAAV,EAAmB;AACrC,QAAIU,MAAM,GAAGV,QAAQ,CAAC,CAAD,CAAR,CAAYW,MAAzB;AACA,QAAIC,IAAI,GAAG,yDAAX;AAEA,SAAKzD,GAAL,CAASG,IAAT,CAAcsD,IAAd,EAAoB,CAACF,MAAD,CAApB,EAA8B,UAAUG,MAAV,EAAkB;AAC/C,UAAIC,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,MAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;;AAEA,WAAK,IAAIsB,GAAT,IAAgBF,MAAhB,EAAuB;AACtB,YAAIG,SAAS,GAAG,0DAA0DD,GAA1E;AAEA,YAAIE,MAAM,GAAqBzD,QAAQ,CAACC,cAAT,CAAwBuD,SAAxB,CAA/B;;AACA,YAAIC,MAAJ,EAAY;AACXA,UAAAA,MAAM,CAACvD,SAAP,GAAmBmD,MAAM,CAACE,GAAD,CAAzB;AACA;AACD;AACD,KAZD,EAYG/C,WAZH,CAYe,IAZf;AAaA;AAED;AACD;AACA;AACA;AACA;;;AACCuD,EAAAA,qBAAqB,CAACxB,OAAD,EAAUC,QAAV,EAAmB;AACvC,QAAIwB,OAAO,GAAGhE,QAAQ,CAACC,cAAT,CAAwB,8DAAxB,EAAwF2D,KAAtG;AACA,QAAIK,YAAY,GAAGjE,QAAQ,CAACC,cAAT,CAAwB,mEAAxB,EAA6F2D,KAAhH;AACA,QAAIR,IAAI,GAAG,2DAAX;AAEA,SAAKzD,GAAL,CAASG,IAAT,CAAcsD,IAAd,EAAoB,CAACY,OAAD,EAAUC,YAAV,CAApB,EAA6C,UAAUZ,MAAV,EAAkB;AAC9D;AACA1D,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoB+C,MAAM,CAAC9C,GAA3B,EAAgC,WAAhC,EAA6C,IAA7C,EAAmD,QAAnD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAKA,QAAI8C,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,IAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACA;;AACDiC,EAAAA,qBAAqB,CAAC3B,OAAD,EAAUC,QAAV,EAAmB;AACvC,QAAIc,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,IAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACA;AAED;AACD;AACA;;;AACCkC,EAAAA,iBAAiB,CAAC5B,OAAD,EAAUC,QAAV,EAAmB;AACnC,QAAIU,MAAM,GAAGV,QAAQ,CAAC,CAAD,CAAR,CAAYW,MAAzB;AACA,QAAIC,IAAI,GAAG,uDAAX;AAEA,SAAKzD,GAAL,CAASG,IAAT,CAAcsD,IAAd,EAAoB,CAACF,MAAD,CAApB,EAA8B,UAAUG,MAAV,EAAkB;AAC/C,UAAIC,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,MAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;;AAEA,WAAK,IAAIsB,GAAT,IAAgBF,MAAhB,EAAuB;AACtB,YAAGE,GAAG,IAAI,OAAV,EAAkB;AACjB,cAAIC,SAAS,GAAG,0DAA0DD,GAA1E;AAEA,cAAIE,MAAM,GAAqBzD,QAAQ,CAACC,cAAT,CAAwBuD,SAAxB,CAA/B;;AACA,cAAIC,MAAJ,EAAY;AACXA,YAAAA,MAAM,CAACvD,SAAP,GAAmBmD,MAAM,CAACE,GAAD,CAAzB;AACA;AACD;AACD;AACD,KAdD,EAcG/C,WAdH,CAce,IAdf;AAeA;AAED;AACD;AACA;AACA;AACA;;;AACC4D,EAAAA,mBAAmB,CAAC7B,OAAD,EAAUC,QAAV,EAAmB;AACrC,QAAI6B,UAAU,GAAGrE,QAAQ,CAACC,cAAT,CAAwB,4DAAxB,EAAsF2D,KAAvG;AACA,QAAIR,IAAI,GAAG,yDAAX;AAEA,SAAKzD,GAAL,CAASG,IAAT,CAAcsD,IAAd,EAAoB,CAACiB,UAAD,CAApB,EAAkC,UAAUhB,MAAV,EAAkB;AACnD;AACA1D,MAAAA,GAAG,CAACU,MAAD,CAAH,CAAYC,OAAZ,CAAoB+C,MAAM,CAAC9C,GAA3B,EAAgC,WAAhC,EAA6C,IAA7C,EAAmD,QAAnD;AACA,KAHD,EAGGC,WAHH,CAGe,IAHf;AAKA,QAAI8C,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,IAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACA;;AACDqC,EAAAA,mBAAmB,CAAC/B,OAAD,EAAUC,QAAV,EAAmB;AACrC,QAAIc,KAAK,GAAGtD,QAAQ,CAACC,cAAT,CAAwB,qCAAxB,CAAZ;AACAqD,IAAAA,KAAK,CAACtB,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACA;;AAjUF;;AAoUAsC,GAAG,CAACC,OAAJ,CAAYC,SAAZ,GAAwBvF,YAAxB"}